<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MONDRIVER</title>

<!-- GOOGLE API -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBPIaWMQd6o4K8miOzLAFUU8-s3wVOehpI&libraries=places"></script>

<style>
body {
    margin: 0;
    background: #000;
    font-family: "Helvetica Neue", Arial, sans-serif;
    color: white;
    text-align: center;
}

/* ---- TITRE ---- */
h1 {
    margin-top: 30px;
    font-size: 55px;
    font-weight: 900;
    letter-spacing: 7px;
    color: #fff;
    text-shadow: 0px 0px 12px rgba(0, 136, 255, 0.4);
}

/* --- CONTAINER --- */
.container {
    margin: 25px auto;
    width: 92%;
    max-width: 500px;
    padding: 20px;
    border-radius: 18px;
    background: rgba(255,255,255,0.05);
    box-shadow: 0 0 25px rgba(0,0,0,0.8);
    backdrop-filter: blur(10px);
}

/* INPUTS */
input, select {
    width: 100%;
    padding: 14px;
    border-radius: 10px;
    border: none;
    margin-bottom: 15px;
    background: #1b1b1b;
    color: white;
    font-size: 16px;
    outline: none;
    box-shadow: inset 0 0 6px rgba(0,0,0,0.6);
}

input::placeholder {
    color: #ccc;
}

/* BOUTON BLEU (RÃ‰SERVATION) */
button.blue {
    width: 100%;
    padding: 15px;
    border: none;
    background: #0099ff;
    color: #fff;
    font-size: 20px;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 700;
    margin-top: 10px;
    transition: 0.2s;
}
button.blue:hover {
    transform: scale(1.04);
    background: #0080d4;
}

/* BOUTON VERT (CALCULER PRIX) */
button.green {
    width: 100%;
    padding: 15px;
    border: none;
    background: #00cc44;
    color: #fff;
    font-size: 20px;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 700;
    margin-top: 10px;
    transition: 0.2s;
}
button.green:hover {
    transform: scale(1.04);
    background: #00a63a;
}

/* BOUTON RÃ‰SERVATION DISABLED */
#btn-book:disabled {
    background: #555 !important;
    cursor: not-allowed;
}

/* PRIX */
#prix {
    font-size: 28px;
    margin-top: 20px;
    display: none;
    font-weight: bold;
    padding: 10px;
    border-radius: 10px;
    background: rgba(0,153,255,0.15);
}

/* LANGUES */
.language-switcher {
    position: fixed;
    top: 15px;
    right: 15px;
    display: flex;
    gap: 10px;
    z-index: 9999;
}
.language-switcher img {
    width: 32px;
    height: 22px;
    border-radius: 4px;
    cursor: pointer;
    transition: 0.2s;
    box-shadow: 0 0 6px rgba(255,255,255,0.3);
}
.language-switcher img:hover {
    transform: scale(1.1);
}
.language-active {
    outline: 2px solid #0a84ff;
    box-shadow: 0 0 10px #0a84ff;
}

/* FOOTER (APPELER â€“ CONTACT) */
.footer {
    margin-top: 40px;
    padding-bottom: 40px;
}

.footer a {
    display: block;
    margin: 12px auto;
    width: 80%;
    max-width: 300px;
    padding: 14px;
    border-radius: 10px;
    font-size: 18px;
    text-decoration: none;
    font-weight: 700;
    transition: 0.3s;
}

/* bouton vert appeler */
.footer .call {
    background: #00cc44;
    color: white;
}
.footer .call:hover {
    background: #00a63a;
}

/* bouton email */
.footer .mail {
    background: #0099ff;
    color: white;
}
.footer .mail:hover {
    background: #007ad1;
}
</style>
</head>

<body>

<!-- LANGUES -->
<div class="language-switcher">
    <img id="lang-fr" src="https://flagcdn.com/w20/fr.png">
    <img id="lang-en" src="https://flagcdn.com/w20/gb.png">
    <img id="lang-es" src="https://flagcdn.com/w20/es.png">
</div>

<h1>MONDRIVER</h1>

<div class="container">

<label id="lbl-depart">Adresse de dÃ©part :</label>
<input id="depart" placeholder="Votre adresse">

<label id="lbl-arrivee">Adresse dâ€™arrivÃ©e :</label>
<input id="arrivee" placeholder="Lieu dâ€™arrivÃ©e">

<label id="lbl-date">Date :</label>
<input type="date" id="date">

<label id="lbl-heure">Heure :</label>
<input type="time" id="heure">

<label id="lbl-personnes">Personnes :</label>
<select id="personnes">
    <option>1</option><option>2</option><option>3</option>
    <option>4</option><option>5</option><option>6</option>
    <option>7</option><option>8</option>
</select>

<label id="lbl-bagages">Bagages :</label>
<select id="bagages">
    <option>0</option><option>1</option><option>2</option><option>3</option>
</select>

<label id="lbl-enfants">SiÃ¨ges enfant :</label>
<select id="enfants">
    <option>0</option><option>1</option><option>2</option>
</select>

<label id="lbl-animaux">Animaux :</label>
<select id="animaux">
    <option>0</option><option>1</option>
</select>

<label id="lbl-vehicule">Type de vÃ©hicule :</label>
<select id="vehicule">
    <option value="berline">Berline</option>
    <option value="suv">6 Places / gros bagages</option>
    <option value="van">Van 8 places</option>
</select>

<label id="lbl-telephone">TÃ©lÃ©phone :</label>
<input type="tel" id="telephone" placeholder="+33 7 50 57 27 22">

<label id="lbl-email">Email :</label>
<input type="email" id="email" placeholder="email@example.com">

<div id="prix"></div>

<button class="green" id="btn-price" onclick="calculerPrix()">CALCULER LE PRIX</button>
<button class="blue" id="btn-book" onclick="envoyerReservation()" disabled>LANCER MA RÃ‰SERVATION</button>

</div>

<!-- FOOTER -->
<div class="footer">
    <a class="call" href="tel:+33750572722">ðŸ“ž Appeler un chauffeur</a>
    <a class="mail" href="mailto:mondriver33@gmail.com">ðŸ“§ Contactez-nous</a>
</div>

<script>
/* AUTOCOMPLETE */
new google.maps.places.Autocomplete(depart);
new google.maps.places.Autocomplete(arrivee);

/* VEHICULE AUTO VAN */
personnes.onchange = () => {
    if (parseInt(personnes.value) >= 7) {
        vehicule.value = "van";
        vehicule.disabled = true;
    } else vehicule.disabled = false;
};

/* DISTANCE */
async function calculerDistance() {
    let dep = depart.value, arr = arrivee.value;
    if (!dep || !arr) return null;

    let url = `https://maps.googleapis.com/maps/api/distancematrix/json?origins=${encodeURIComponent(dep)}&destinations=${encodeURIComponent(arr)}&key=AIzaSyBPIaWMQd6o4K8miOzLAFUU8-s3wVOehpI`;
    let proxy = "https://api.allorigins.win/get?url=";

    let r = await fetch(proxy + encodeURIComponent(url));
    let j = JSON.parse((await r.json()).contents);

    try { return j.rows[0].elements[0].distance.value / 1000; }
    catch { return null; }
}

/* PRIX */
async function calculerPrix() {
    let km = await calculerDistance();
    if (!km) return alert("Adresse introuvable.");

    let type = vehicule.value, prix;

    if (type === "berline") prix = km * 2;
    if (type === "suv") prix = km * 2.1 + 10;
    if (type === "van") prix = km * 2.1 + 15;

    if (prix < 20) prix = 20;

    prix = Math.round(prix);
    prixDiv.style.display = "block";
    prixDiv.innerText = "Prix estimÃ© : " + prix + " â‚¬";
    btnBook.disabled = false;
}

/* RESERVATION */
async function envoyerReservation() {

    let p = prixDiv.innerText;
    if (!p.includes("â‚¬")) return alert("Calculez le prix d'abord.");

    let msg =
`Nouvelle rÃ©servation MONDRIVER :

DÃ©part : ${depart.value}
ArrivÃ©e : ${arrivee.value}

Date : ${date.value}
Heure : ${heure.value}

Personnes : ${personnes.value}
Bagages : ${bagages.value}
Enfants : ${enfants.value}
Animaux : ${animaux.value}

VÃ©hicule : ${vehicule.value}

TÃ©lÃ©phone : ${telephone.value}
Email : ${email.value}

${p}`;

    window.open(`https://wa.me/33750572722?text=${encodeURIComponent(msg)}`);
    window.open(`mailto:mondriver33@gmail.com?subject=Nouvelle rÃ©servation&body=${encodeURIComponent(msg)}`);
    alert("Votre demande a Ã©tÃ© envoyÃ©e !");
}
</script>

</body>
</html>